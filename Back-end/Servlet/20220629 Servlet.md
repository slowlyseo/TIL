title : Servlet 2ì¼ì°¨

date : 2022-06-29



------



ë³µìŠµ : doGet() / doPost()ë¥¼ ë‘˜ ë‹¤ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œë¥¼ ë§Œë“¤ì–´ì„œ (doHandleP(), doProcess()) ì²˜ë¦¬í•˜ëŠ” ë°©ì‹

-> doGet() í˜¹ì€ doPost() ì–´ëŠ ìª½ìœ¼ë¡œë“  ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ í•œ ë²ˆì— ì²˜ë¦¬ ê°€ëŠ¥

doProcess(request, response); -> ê°ì²´ ì „ë‹¬

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		doProcess(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		doProcess(request, response);
	}

	protected void doProcess(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
	}
```





ì˜¤ëŠ˜ì¹˜ ë³µìŠµí•˜ê¸° ì „ì— ì½ì–´ë³´ë©´ ì¢‹ì„ ê¸€ : [JSP, JS, JQuery, JAVAì˜ ì°¨ì´ì ](https://udpark.tistory.com/127)

ğŸ™„...

- JAVA = í”„ë¡œê·¸ë˜ë° ì–¸ì–´
- JSP = ì„œë²„ ì–¸ì–´
- JS = í´ë¼ì´ì–¸íŠ¸ ì–¸ì–´
- JQuery = JSì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬

ê¸°ì–µí•˜ê¸°...

ìë°”ë¡œ HTML ë¬¸ì„œë¥¼ ì¶œë ¥í•  ë•Œ ì“°ëŠ” ê²Œ ì„œë¸”ë¦¿, ì„œë¸”ë¦¿ì„ ë” ê°„ë‹¨í•˜ê²Œ ë§Œë“ ê²Œ JSP



JavaScriptì™€ jQueryë¥¼ ì´ìš©í•´ì„œ ì„œë¸”ë¦¿ì— ìš”ì²­í•  ìˆ˜ ìˆìŒ.

jsë¥¼ ì´ìš©í•œ ìš”ì²­ì—ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆëŠ”ë°,

- DOM ì‚¬ìš©
- Name ì†ì„± ì‚¬ìš©

ì´ë‹¤. ì£¼ë¡œ DOM ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.



**DOM ì‚¬ìš©**

```
/* ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì„œë¸”ë¦¿ì— ìš”ì²­ : DOM ì‚¬ìš© */
 
 window.onload = function() {
	var frmLogin = document.getElementById("frmLogin");
	
	frmLogin.onsubmit = function() {
		
		var id = document.getElementById("user_id");
		var pw = document.getElementById("user_pw");
		
		if(id.value == "" || pw.value == ""){
			alert("ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
			return false;
		} else {
			frmLogin.method = "post";
			frmLogin.action = "loginJs";
			frmLogin.submit();
		}
		
	}; // onsubmit ë
	
}; // window.onload ë

</script>
</head>
<body>
	<form id="frmLogin" name="frmLogin">


		ì•„ì´ë”” :<input type="text" name="user_id" id="user_id"><br> 
		ë¹„ë°€ë²ˆí˜¸:<input type="password" name="user_pw" id="user_pw"><br> 
			
			<input type="submit"value="ë¡œê·¸ì¸"> 
			<input type="reset" value="ë‹¤ì‹œì…ë ¥">
```

window.onload = function() // í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë”© í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì € ë‚´ ëª¨ë“  ìš”ì†Œê°€ ì¤€ë¹„ë˜ë©´ ì‹¤í–‰.

frmLogin.onsubmit = function() // ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìœ„í•´ ì‚¬ìš©, ì œëŒ€ë¡œ ë˜ì§€ ì•Šì€ ê°’ì´ actionìœ¼ë¡œ ë„˜ì–´ê°€ê¸° ì „ì— ê²°ê³¼ê°’ì„ ë°˜í™˜í•´ì¤€ë‹¤.

getElementById // ì…ë ¥ëœ ê°’ì„ ë³€ìˆ˜ idì— ì €ì¥í•¨.



ë‹¤ìŒì€ ì„œë¸”ë¦¿ ì½”ë“œë¥¼ ë³´ì.

```
@WebServlet("/loginJs")
public class LoginJsServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;

	public LoginJsServlet() {
		super();
	}

	
	protected void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		System.out.println("doGet ë©”ì†Œë“œ í˜¸ì¶œ");
		doHandle(request, response);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		System.out.println("doPost ë©”ì†Œë“œ í˜¸ì¶œ");
		doHandle(request, response);
	}

	// doGet, doPost ë‘˜ ë‹¤ ì²˜ë¦¬
	protected void doHandle(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {

		request.setCharacterEncoding("utf-8");
		// ë°ì´í„° ì¸ì½”ë”©

		String user_id = request.getParameter("user_id");
		String user_pw = request.getParameter("user_pw");

		// 2. í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡ : ì‘ë‹µ ì²˜ë¦¬
		response.setContentType("text/html;charset=utf-8");
		// HTML ë¬¸ì„œ ì¸ì½”ë”©
		
		PrintWriter out = response.getWriter();

		// html ë¬¸ì„œ í˜•ì‹ìœ¼ë¡œ ë°ì´í„° ì‘ì„±í•´ì„œ ì „ì†¡
		out.println("<html><head></head><body>");
		out.println("ì•„ì´ë”” : " + user_id + "<br>");
		out.println("ë¹„ë°€ë²ˆí˜¸ : " + user_pw + "<br>");
		out.println("</body></html>");
	}
```

**doGet(), doPost()** ë‘˜ ë‹¤ ì“°ê³  ìˆê³ ,

**request.setCharacterEncoding("utf-8");** ë¡œ ë°ì´í„°ë¥¼ ì¸ì½”ë”©í•˜ê³ 

**response.setContentType("text/html;charset=utf-8");** ë¡œ html ë¬¸ì„œë¥¼ ì¸ì½”ë”©

**PrintWriter out = response.getWriter();** get(ì…ë ¥ë°›ì€ ê°’)ì„ í™”ë©´ì— ì†¡ì¶œ

```
out.println("<html><head></head><body>");
out.println("ì•„ì´ë”” : " + user_id + "<br>");
out.println("ë¹„ë°€ë²ˆí˜¸ : " + user_pw + "<br>");
out.println("</body></html>");
```

ì„œë¸”ë¦¿ì€ Java ì˜ì—­ì´ë¼ì„œ, html í˜•íƒœì˜ ë¬¸ìë¥¼ í™”ë©´ì— ì¶œë ¥í•˜ë ¤ë©´ ìœ„ ì½”ë“œì²˜ëŸ¼ html êµ¬ì¡°ë¥¼ ì¼ì¼íˆ ì…ë ¥í•´ì¤˜ì•¼ í•œë‹¤ ... ë„ˆë¬´ ë²ˆê±°ë¡œì›€! (ì´ë˜ì„œ JSPê°€ ë‚˜ì˜¨ ëª¨ì–‘...â˜¹ï¸)

user_id / user_pwëŠ” jsì—ì„œ ì§€ì •í•´ì¤€ idê°’ì„ ê°€ì§€ê³  ì˜¨ ê²ƒ

(ì—¬ê¸°ì„œ ì˜ë¬¸ì€ method, action ê°’ì„ formì—ì„œ ì£¼ì§€ ì•Šê³  elseë¬¸ì—ì„œ ì£¼ëŠ” ì´ìœ ...)

-> ì§ˆë¬¸í•˜ê¸°



------



**ì„œë¸”ë¦¿ í¬ì›Œë”©**

- ì„œë¸”ë¦¿ì—ì„œ ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ë‚˜ JSP í˜ì´ì§€ë¡œ ìš”ì²­ì„ ì „ë‹¬í•˜ëŠ” ê¸°ëŠ¥
- ìš”ì²­ì— ëŒ€í•œ ì¶”ê°€ ì‘ì—…ì„ ë‹¤ë¥¸ ì„œë¸”ë¦¿ì—ì„œ ìˆ˜í–‰
- ìš”ì²­ì— í¬í•¨ëœ ì •ë³´ë¥¼ ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ë‚˜ JSP í˜ì´ì§€ì™€ ê³µìœ 
- ìš”ì²­ì— ì •ë³´ë¥¼ í¬í•¨ì‹œì¼œ ë‹¤ë¥¸ ì„œë¸”ë¦¿ìœ¼ë¡œ ì „ë‹¬
- ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë·°ë¡œ ë°ì´í„° ì „ë‹¬

ê°ê°ì˜ ê¸°ëŠ¥ì„ ê°€ì§„ ì„œë¸”ë¦¿ë“¤ì´ í˜‘ì—…ì„ í•œë‹¤ê³  ìƒê°í•˜ë©´ ë¨.



í¬ì›Œë”©ì—ëŠ” ì´ 4ê°€ì§€ ë°©ë²•ì´ ìˆëŠ”ë°,

1. Redirect // ì›¹ ë¸Œë¼ìš°ì €ì— ì¬ìš”ì²­ (ë°”ë¡œ ì†¡ì¶œ)
2. Refresh // ì›¹ ë¸Œë¼ìš°ì €ì— ì¬ìš”ì²­ (ì‹œê°„ ì •í•´ë‘ê³  ì†¡ì¶œ ê°€ëŠ¥)
3. Location // ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ì¬ìš”ì²­
4. Dispatch // ì„œë¸”ë¦¿ì´ ì§ì ‘ ìš”ì²­(í´ë¼ì´ì–¸íŠ¸ X), URLì´ ë°”ë€Œì§€ ì•ŠìŒ

ì´ë‹¤.



í¬ì›Œë”©ì´ ì†¡ì¶œì´ë¼ë©´ ì†¡ì¶œí•  ë°ì´í„°ë¥¼ ë¬¶ì–´ì£¼ëŠ” ë°”ì¸ë”©ë„ ìˆë‹¤.

í¬ì›Œë”©í•  ë°ì´í„°ê°€ ë„ˆë¬´ í¬ê³  ë¬´ê²ë‹¤ë©´ ê·¸ ì „ì— ë°”ì¸ë”©ì„ í•´ì¤˜ì•¼ í•œë‹¤.

ë°”ì¸ë”©ì„ í•  ë•Œì—ëŠ” dispatch ë°©ì‹ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.



ë°”ì¸ë”©ì€

1. í¬ì›Œë”©í•  ë•Œ **setAttribute("ë°”ì¸ë”© ì´ë¦„", "ë°ì´í„°")** ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬
2. ë°”ì¸ë”© ì´ë¦„ê³¼ ë°ì´í„°ë¥¼ ë¬¶ì–´ ì„¤ì •í•œ í›„,
3. í¬ì›Œë”©ëœ ë¬¸ì„œì—ì„œ **getAttribute("ë°”ì¸ë”© ì´ë¦„")** ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°›ì•„
4. ë°”ì¸ë”©ëœ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ì—¬ ì‚¬ìš©

í•œë‹¤.



```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		request.setAttribute("name", "í™ê¸¸ë™");
		request.setAttribute("address", "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬");
		
		// dispatch ì‚¬ìš©í•œ í¬ì›Œë”©
		RequestDispatcher dispatch = request.getRequestDispatcher("second06");
		dispatch.forward(request, response);
```

ğŸ˜¶â€ğŸŒ«ï¸

```
request.setAttribute("name", "í™ê¸¸ë™");
request.setAttribute("address", "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬");
```

nameì´ë¼ëŠ” ë°”ì¸ë”© ì´ë¦„ì— í™ê¸¸ë™ì´ë¼ëŠ” ë°ì´í„° ì‚½ì…

addressë¼ëŠ” ë°”ì¸ë”© ì´ë¦„ì— ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ë¼ëŠ” ë°ì´í„° ì‚½ì…



```
RequestDispatcher dispatch = request.getRequestDispatcher("second06");
dispatch.forward(request, response);
```

second06 ì„œë¸”ë¦¿ì— dispatchë¡œ ë°ì´í„° ì „ì†¡



ì´ì œ second06 ì„œë¸”ë¦¿ì„ ì‚´í´ë³´ë©´,

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		
		response.setContentType("text/html;charset=utf-8");
		
		// ë°”ì¸ë”© ëœ ë°ì´í„° ì¶”ì¶œ
		String name = (String) request.getAttribute("name");
		String address = (String) request.getAttribute("address");

		// í´ë¼ì´ì–¸íŠ¸ ì›¹ í˜ì´ì§€ë¡œ ì¶œë ¥
		PrintWriter out = response.getWriter();

		out.println("<html><body>");
		out.println("ì´ë¦„ : " + name + "<br>");
		out.println("ì£¼ì†Œ : " + address);
		out.println("<br> dispatchë¥¼ ì´ìš©í•œ ë°”ì¸ë”©");
		out.println("</body></html>"); // í˜ì´ì§€ urlì´ ì•ˆ ë³€í•˜ëŠ” ê±° í™•ì¸
	}
```

toGet()ìœ¼ë¡œ ì²˜ë¦¬í–ˆê³ , htmlë¡œ ì¶œë ¥í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œë¥¼ ì‚¬ìš©í–ˆê³ , getìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•´ì„œ, ìµœì¢…ì ìœ¼ë¡œ ì›¹ í˜ì´ì§€ì— ì¶œë ¥í•œë‹¤.

ì—¬ê¸°ì„œëŠ” ë‘ ê°€ì§€ ë°ì´í„°ë§Œ ë°›ì•˜ì§€ë§Œ dbë¥¼ ì—°ë™í•˜ë©´ í•œêº¼ë²ˆì— ë§ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ ì†¡ì¶œí•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ìœ ìš©í•œ ë°©ë²•ì´ë‹¤.

íŠ¹íˆ dbë¥¼ ì—°ë™í–ˆì„ ë•Œ ë°ì´í„°ë¥¼ ì €ì¥í•´ë‘ë ¤ë©´, Javaì—ì„œ ê·¸ë¬ë“¯ DTOë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë°, ì„œë¸”ë¦¿ / ìŠ¤í”„ë§ì—ì„œëŠ” DTO ë³´ë‹¨ VOë¥¼ ë” ë§ì´ ì‚¬ìš©í•œë‹¤.



------

##### DTOì™€ VOì˜ ê³µí†µì ê³¼ ì°¨ì´ì 

|                   DTO                   |                   VO                    |
| :-------------------------------------: | :-------------------------------------: |
|         ë°ì´í„° ì €ì¥ ë‹´ë‹¹ í´ë˜ìŠ¤         |         ë°ì´í„° ì €ì¥ ë‹´ë‹¹ í´ë˜ìŠ¤         |
| ê³„ì¸µê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê°ì²´ | ê³„ì¸µê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê°ì²´ |
|           ìˆœìˆ˜í•œ ë°ì´í„° ê°ì²´            |           ìˆœìˆ˜í•œ ë°ì´í„° ê°ì²´            |
|      Getter / Setter ë©”ì†Œë“œë§Œ í¬í•¨      |           Getter ê¸°ëŠ¥ë§Œ ìˆ˜í–‰            |
|                ê°€ë³€ì ì„                 |      valueë¥¼ ìœ„í•´ ì‚¬ìš©, ë¶ˆë³€ ì†ì„±       |



------



ì„œë¸”ë¦¿ ë...

(ì´í•´ëŠ” no... ğŸ™…ğŸ»â€â™€ï¸)